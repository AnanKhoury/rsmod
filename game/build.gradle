apply plugin: 'application'
apply plugin: 'org.jetbrains.kotlin.jvm'
apply from: "$rootDir/gradle/kotlin.gradle"

description = 'RSMod Game'
mainClassName = 'gg.rsmod.game.Launcher'

dependencies {
    compile project(':util')
    compile project(':net')

    runtimeClasspath project(":game:plugins")

    compile group: 'org.jetbrains.kotlin', name: 'kotlin-stdlib-jdk8', version: kotlinVersion
    compile group: 'org.jetbrains.kotlin', name: 'kotlin-scripting-common', version: kotlinVersion
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.1.0'

    compile group: 'org.reflections', name: 'reflections', version: reflectionsVersion
    compile group: 'commons-io', name: 'commons-io', version: commonsIoVersion
    compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: log4jVersion
    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: log4jVersion
    compile group: 'io.github.classgraph', name: 'classgraph', version: classGraphVersion
    compile group: 'it.unimi.dsi', name: 'fastutil', version: fastUtilVersion

    implementation group: 'com.lambdaworks', name: 'scrypt', version: scryptVersion
    implementation group: 'io.netty', name: 'netty-all', version: nettyVersion
    implementation group: 'com.google.guava', name: 'guava', version: guavaVersion
    implementation group: 'org.bouncycastle', name: 'bcprov-jdk15on', version: bouncycastleVersion
    implementation group: 'com.github.runelite.runelite', name: 'cache', version: runeliteVersion

    testCompile "org.jetbrains.kotlin:kotlin-test-junit:$kotlinVersion"
    testImplementation group: 'junit', name: 'junit', version: junitVersion
}

sourceSets {
    main.kotlin.srcDirs = ['src/main/kotlin']
    main.java.srcDirs = ['src/main/kotlin']
    main.resources.srcDirs = ['src/main/resources']
}

applicationDistribution.from("$rootDir/data/") {
    include '**'
    exclude 'saves/*'
    exclude '*.example.yml'
    into 'bin/data/'
}

applicationDistribution.from("$rootDir") {
    include 'plugins/*'
    include 'game.example.yml'
    into 'bin/'
}